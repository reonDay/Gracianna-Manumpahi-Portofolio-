<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gracianna Manumpahi — Portfolio Model</title>
  <meta name="description" content="Portfolio resmi Gracianna Manumpahi — model. Foto, showreel, kontak & book me." />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root{
      --maroon: #6B0F0F;
      --muted: #777777;
      --gap: 14px;
      --radius: 12px;
      --max-width: 1100px;
      --light-bg: #fff6f6;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Arial;background:linear-gradient(180deg,#fff 0%,var(--light-bg) 100%);color:#111}
    .container{width:calc(100% - 40px);max-width:var(--max-width);margin:0 auto;padding-bottom:40px}

    /* header (simple) */
    header{position:sticky;top:0;background:rgba(255,255,255,0.7);backdrop-filter:blur(4px);z-index:40}
    .brand{display:flex;align-items:center;gap:12px;padding:14px 0}
    .logo{width:46px;height:46px;border-radius:10px;background:linear-gradient(135deg,var(--maroon),#A62A2A);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-family:Playfair Display}

    /* ABOUT section */
    .about{padding:20px 0 32px}
    .about-inner{display:flex;gap:20px;align-items:flex-start}
    .about-photo{width:160px;flex:0 0 160px;border-radius:12px;overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,0.06)}
    .about-photo img{width:100%;height:100%;object-fit:cover;display:block}
    .about-content{flex:1}
    .about-meta{color:var(--muted);margin-bottom:8px;text-transform:uppercase;font-size:12px}
    .about-name{font-family:Playfair Display;color:var(--maroon);font-size:26px;margin:0 0 8px}
    .about-text{color:#222;line-height:1.5;margin-bottom:12px}

    .about-grid{display:flex;gap:14px;flex-wrap:wrap;justify-content:center}
    .about-card{background:#fff;padding:10px;border-radius:12px;box-shadow:0 8px 26px rgba(0,0,0,0.04);min-width:180px;flex:1}
    .about-card h3{margin:0 0 8px;font-size:14px;color:var(--maroon);font-family:Playfair Display}
    .about-card ul{margin:0;padding:0;list-style:none;color:var(--muted);font-size:13px}
    .about-card li{margin-bottom:6px}

    /* gallery carousel (kolom vertikal) */
    #portfolio { padding:28px 0 40px; }
    .portfolio-wrap{position:relative}
    .carousel{overflow:hidden}
    .track{display:flex;gap:var(--gap);transition:transform .35s ease;will-change:transform;padding:6px 0}
    .column{display:flex;flex-direction:column;gap:var(--gap);align-items:stretch}

    /* card now contains image wrapper + caption */
    .card{width:100%;cursor:pointer;display:flex;flex-direction:column;gap:8px}
    .imgwrap{border-radius:var(--radius);overflow:hidden;background:#f6f6f6;box-shadow:0 6px 18px rgba(0,0,0,0.04);aspect-ratio:4/3}
    .imgwrap img{width:100%;height:100%;object-fit:cover;display:block;transition:transform .35s}
    .imgwrap:hover img{transform:scale(1.03)}

    .caption{
      padding:8px 6px 2px;
      font-size:14px;
      color:var(--muted);
      display:flex;
      flex-direction:column;
      gap:4px;
    }
    .caption .title{font-family:Playfair Display;color:#111;font-weight:600;font-size:15px;line-height:1.1}
    .caption .meta{font-size:13px;color:var(--muted)}

    .card a{display:block;width:100%;height:100%} /* anchor still covers image */

    /* nav arrows */
    .carousel-nav{position:absolute;top:50%;left:0;right:0;display:flex;justify-content:space-between;transform:translateY(-50%);pointer-events:none;padding:0 8px}
    .nav-btn{pointer-events:auto;background:rgba(0,0,0,0.55);border:0;color:#fff;padding:10px 12px;border-radius:8px;margin:0 8px;cursor:pointer;font-size:18px}
    .nav-btn[hidden]{display:none}
    .nav-btn:disabled{opacity:0.45;cursor:not-allowed}

    /* lightbox */
    .lightbox{position:fixed;inset:0;background:rgba(0,0,0,0.85);display:flex;align-items:center;justify-content:center;padding:20px;z-index:60;opacity:0;pointer-events:none;transition:opacity .18s}
    .lightbox.open{opacity:1;pointer-events:auto}
    .lightbox img{max-width:95%;max-height:85%;border-radius:12px;box-shadow:0 20px 60px rgba(0,0,0,0.6)}
    .lb-controls{position:absolute;inset:0;display:flex;align-items:center;justify-content:space-between;pointer-events:none}
    .lb-btn{pointer-events:auto;background:rgba(255,255,255,0.06);border:0;color:#fff;padding:12px;border-radius:50%;font-size:20px;cursor:pointer;backdrop-filter:blur(2px)}
    .lb-close{position:absolute;top:20px;right:20px;background:rgba(255,255,255,0.06);border:0;color:#fff;padding:8px 10px;border-radius:8px;cursor:pointer}

    /* SOCIAL MEDIA SECTION */
    .social-section {
      padding: 40px 0;
      background-color: #fff;
      border-radius: var(--radius);
      box-shadow: 0 8px 26px rgba(0,0,0,0.04);
      margin-top: 20px;
    }
    
    .social-inner {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 24px;
    }
    
    .social-title {
      font-family: Playfair Display;
      color: var(--maroon);
      font-size: 24px;
      margin-bottom: 8px;
      text-align: center;
    }
    
    .social-subtitle {
      color: var(--muted);
      text-align: center;
      max-width: 600px;
      margin: 0 auto 20px;
      line-height: 1.6;
    }
    
    .social-icons {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      justify-content: center;
    }
    
    .social-icon {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-decoration: none;
      width: 100px;
      transition: transform 0.3s ease;
    }
    
    .social-icon:hover {
      transform: translateY(-5px);
    }
    
    .icon-circle {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      background: linear-gradient(135deg, #f9f2f2, #f0e0e0);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 10px;
      transition: background 0.3s ease;
    }
    
    .social-icon:hover .icon-circle {
      background: linear-gradient(135deg, var(--maroon), #A62A2A);
    }
    
    .social-icon:hover .icon-circle i {
      color: white;
    }
    
    .icon-circle i {
      font-size: 28px;
      color: var(--maroon);
      transition: color 0.3s ease;
    }
    
    .social-label {
      color: #333;
      font-size: 14px;
      text-align: center;
      font-weight: 500;
    }
    
    /* CONTACT SECTION */
    .contact-section {
      padding: 40px 0;
      background-color: #fff;
      border-radius: var(--radius);
      box-shadow: 0 8px 26px rgba(0,0,0,0.04);
      margin-top: 20px;
    }
    
    .contact-inner {
      display: flex;
      flex-wrap: wrap;
      gap: 30px;
    }
    
    .contact-info {
      flex: 1;
      min-width: 300px;
    }
    
    .contact-form {
      flex: 2;
      min-width: 300px;
    }
    
    .contact-title {
      font-family: Playfair Display;
      color: var(--maroon);
      font-size: 24px;
      margin-bottom: 20px;
    }
    
    .contact-text {
      color: #555;
      line-height: 1.7;
      margin-bottom: 25px;
    }
    
    .contact-details {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    
    .contact-item {
      display: flex;
      align-items: flex-start;
      gap: 15px;
    }
    
    .contact-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(135deg, #f9f2f2, #f0e0e0);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }
    
    .contact-icon i {
      color: var(--maroon);
      font-size: 18px;
    }
    
    .contact-detail {
      color: #333;
      font-size: 16px;
      line-height: 1.5;
    }
    
    .contact-detail strong {
      color: #111;
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    .form-label {
      display: block;
      margin-bottom: 8px;
      color: #444;
      font-weight: 500;
      font-size: 14px;
    }
    
    .form-input {
      width: 100%;
      padding: 12px 15px;
      border: 1px solid #ddd;
      border-radius: var(--radius);
      font-family: Inter;
      font-size: 15px;
      transition: border-color 0.3s ease;
    }
    
    .form-input:focus {
      outline: none;
      border-color: var(--maroon);
      box-shadow: 0 0 0 2px rgba(107, 15, 15, 0.1);
    }
    
    textarea.form-input {
      min-height: 120px;
      resize: vertical;
    }
    
    .submit-btn {
      background: linear-gradient(135deg, var(--maroon), #A62A2A);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: var(--radius);
      font-family: Inter;
      font-weight: 600;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-block;
    }
    
    .submit-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(107, 15, 15, 0.2);
    }
    
    /* responsive tweaks (visual kolom yang terlihat di layar) */
    @media (max-width:980px){
      .about-inner{flex-direction:row}
      .contact-inner {
        flex-direction: column;
      }
    }
    @media (max-width:720px){
      .about-inner{flex-direction:column;align-items:flex-start}
      .about-photo{width:120px;flex:0 0 120px}
      .about-card{min-width:140px}
    }
    @media (max-width:520px){
      /* JS atur agar 1 kolom terlihat */
      .social-icon {
        width: 80px;
      }
    }

    /* small page styles to keep layout neat */
    h1,h2{margin:0 0 12px;font-family:Playfair Display}
    .lead{color:var(--muted);margin-bottom:8px}
  </style>
</head>
<body>
  <header>
    <div class="container brand">
      <div style="display:flex;align-items:center;gap:12px">
        <div class="logo">G</div>
        <div style="font-family:Playfair Display;color:var(--maroon)">Gracianna Manumpahi</div>
      </div>
      <nav aria-label="Utama">
        <a href="#portfolio" style="text-decoration:none;color:var(--maroon);font-weight:600;margin-right:15px">Portfolio</a>
   </nav>
    </div>
  </header>

  <main class="container">
    <!-- HERO singkat -->
    <section style="display:flex;gap:20px;align-items:center;padding:20px 0 30px">
      <div>
        <div style="color:var(--muted);text-transform:uppercase;font-size:12px">Model | Fashion | Commercial</div>
        <h1 style="font-size:34px">Gracianna Manumpahi</h1>
        <div class="lead">Model profesional — editorial, runway, dan commercial.</div>
      </div>
      <div style="margin-left:auto">
        <div style="width:120px;height:160px;border-radius:12px;overflow:hidden;background:#fff;box-shadow:0 8px 26px rgba(0,0,0,0.06)"><img src="images/GM-Profile1.png" alt="Gracianna" style="width:100%;height:100%;object-fit:cover"></div>
      </div>
    </section>

    <!-- ABOUT ME (baru) -->
    <section id="about" class="about" aria-label="About Me">
      <div style="display:flex;align-items:center;justify-content:space-between;gap:12px">
        <div>
          <div class="about-meta">About</div>
          <h2 class="about-name">Tentang Gracianna</h2>
        </div>
        <div style="margin-left:auto;align-self:flex-start;color:var(--muted);font-size:13px">Siap untuk booking & collaboration</div>
      </div>

      <div class="about-inner" style="margin-top:12px">
        <div class="about-photo">
          <img src="images/GM-Profile2.jpg" alt="Gracianna portrait">
        </div>
        <div class="about-content">
          <p class="about-text">Halo — saya Gracianna, model profesional dengan pengalaman editorial, runway, dan commercial. Saya bekerja dengan berbagai fotografer, brand, dan creative team untuk menghadirkan konsep yang kuat dan estetis. Saya bisa beradaptasi dengan arahan artistic dan commercial, serta nyaman di set foto maupun panggung runway.</p>

          <div class="about-grid">
            <div class="about-card" style="flex:0 0 220px">
              <h3>Organisasi</h3>
              <ul>
                <li>Member — Indonesian Models Association (IMA)</li>
                <li>Volunteer — Fashion4Good Indonesia</li>
              </ul>
            </div>

            <div class="about-card" style="flex:0 0 220px">
              <h3>Hobi</h3>
              <ul>
                <li>Fotografi konsep fashion</li>
                <li>Yoga & movement training</li>
                <li>Travel: mencari referensi mood dan location</li>
              </ul>
            </div>

            <div class="about-card" style="flex:0 0 220px">
              <h3>Achievement</h3>
              <ul>
                <li>Editorial feature — Urban Bloom Magazine (2024)</li>
                <li>Runway — Jakarta Fashion Week (2023)</li>
                <li>Commercial campaign — Skincare Brand X (2024)</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- PORTFOLIO CAROUSEL (tetap di bawah About) -->
    <section id="portfolio" aria-label="Portfolio">
      <h2 style="font-size:22px;color:var(--maroon)">Portfolio</h2>
      <p style="color:var(--muted);margin:6px 0 18px">Klik gambar untuk memperbesar. Tekan Ctrl/Cmd saat klik untuk membuka di tab baru.</p>

      <div class="portfolio-wrap">
        <div class="carousel" id="carousel" aria-live="polite">
          <div class="track" id="track">
            <!-- Contoh .card dengan caption di bawah -->
            <div class="card" data-img="images/portofolio1.jpg">
              <a class="card-link" href="images/portofolio1.jpg" target="_blank" rel="noopener">
                <div class="imgwrap"><img src="images/portofolio1.jpg" alt="Gracianna - editorial 1"></div>
              </a>
              <div class="caption">
                <div class="title">Editorial — Urban Bloom</div>
                <div class="meta">2024 · Fashion</div>
              </div>
            </div>

            <div class="card" data-img="images/portofolio5.jpg">
              <a class="card-link" href="images/portofolio5.jpg" target="_blank" rel="noopener">
                <div class="imgwrap"><img src="images/portofolio5.jpg" alt="Gracianna - editorial 2"></div>
              </a>
              <div class="caption">
                <div class="title">Runway — Spring Show</div>
                <div class="meta">2023 · Runway</div>
              </div>
            </div>

            <div class="card" data-img="images/portofolio3.jpg">
              <a class="card-link" href="images/portofolio3.jpg" target="_blank" rel="noopener">
                <div class="imgwrap"><img src="images/portofolio3.jpg" alt="Gracianna - editorial 3"></div>
              </a>
              <div class="caption">
                <div class="title">Commercial — Beauty Shot</div>
                <div class="meta">2024 · Commercial</div>
              </div>
            </div>

            <div class="card" data-img="images/portofolio4.jpg">
              <a class="card-link" href="images/portofolio4.jpg" target="_blank" rel="noopener">
                <div class="imgwrap"><img src="images/portofolio4.jpg" alt="Gracianna - editorial 4"></div>
              </a>
              <div class="caption">
                <div class="title">Editorial — Monochrome</div>
                <div class="meta">2022 · Editorial</div>
              </div>
            </div>

            <div class="card" data-img="images/portofolio2.jpg">
              <a class="card-link" href="images/portofolio2.jpg" target="_blank" rel="noopener">
                <div class="imgwrap"><img src="images/portofolio2.jpg" alt="Gracianna - editorial 5"></div>
              </a>
              <div class="caption">
                <div class="title">Commercial — Skincare</div>
                <div class="meta">2024 · Commercial</div>
              </div>
            </div>

            <div class="card" data-img="images/portofolio6.jpg">
              <a class="card-link" href="images/portofolio6.jpg" target="_blank" rel="noopener">
                <div class="imgwrap"><img src="images/portofolio6.jpg" alt="Gracianna - editorial 6"></div>
              </a>
              <div class="caption">
                <div class="title">Lookbook — Casual</div>
                <div class="meta">2023 · Lookbook</div>
              </div>
            </div>

            <!-- Tambah / kurangi .card sesuai kebutuhan; ubah teks caption di dalam .caption -->
          </div>
        </div>

        <div class="carousel-nav" aria-hidden="true">
          <button id="prev" class="nav-btn" aria-label="Sebelumnya">◀</button>
          <button id="next" class="nav-btn" aria-label="Berikutnya">▶</button>
        </div>
      </div>
    </section>

    <!-- SOCIAL MEDIA SECTION -->
    <section id="social" class="social-section" aria-label="Sosial Media">
      <div class="social-inner">
        <div>
          <h2 class="social-title">Temui Saya di Sosial Media</h2>
          <p class="social-subtitle">Ikuti perjalanan modeling saya dan lihat di balik layar melalui berbagai platform sosial media.</p>
        </div>
        
        <div class="social-icons">
          <a href="https://instagram.com/anna__143" target="_blank" class="social-icon" aria-label="Instagram">
            <div class="icon-circle">
              <i class="fab fa-instagram"></i>
            </div>
            <span class="social-label">Instagram</span>
          </a>
          
          <a href="https://wa.me/6283129481925" target="_blank" class="social-icon" aria-label="Twitter">
            <div class="icon-circle">
              <i class="fab fa-whatsapp"></i>
            </div>
            <span class="social-label">Whatsapp</span>
          </a>
        </div>
      </div>
    </section>

    <!-- CONTACT SECTION -->
    <section id="contact" class="contact-section" aria-label="Hubungi Saya">
      <h2 class="contact-title">Hubungi Saya</h2>
      
      <div class="contact-inner">
        <div class="contact-info">
          <p class="contact-text">Untuk kerja sama modeling, booking, atau pertanyaan lainnya, silakan hubungi saya melalui formulir atau informasi kontak berikut.</p>
          
          <div class="contact-details">
            <div class="contact-item">
              <div class="contact-icon">
                <i class="fas fa-envelope"></i>
              </div>
              <div class="contact-detail">
                <strong>Email:</strong><br>
                <a href="mailto:book@gracianna.com">book@gracianna.com</a>
              </div>
            </div>
            
            
            <div class="contact-item">
              <div class="contact-icon">
                <i class="fas fa-map-marker-alt"></i>
              </div>
              <div class="contact-detail">
                <strong>Lokasi:</strong><br>
                Palangkaraya, Indonesia
              </div>
            </div>
            
            <div class="contact-item">
              <div class="contact-icon">
                <i class="fas fa-clock"></i>
              </div>
              <div class="contact-detail">
                <strong>Jam Kerja:</strong><br>
                Senin-Jumat: 09.00 - 17.00 WIB
              </div>
            </div>
          </div>
        </div>
        
        <div class="contact-form">
          <form id="contactForm">
            <div class="form-group">
              <label for="name" class="form-label">Nama Lengkap</label>
              <input type="text" id="name" class="form-input" required>
            </div>
            
            <div class="form-group">
              <label for="email" class="form-label">Email</label>
              <input type="email" id="email" class="form-input" required>
            </div>
            
            <div class="form-group">
              <label for="subject" class="form-label">Subjek</label>
              <input type="text" id="subject" class="form-input" required>
            </div>
            
            <div class="form-group">
              <label for="message" class="form-label">Pesan</label>
              <textarea id="message" class="form-input" required></textarea>
            </div>
            
            <button type="submit" class="submit-btn">Kirim Pesan</button>
          </form>
        </div>
      </div>
    </section>
  </main>

  <!-- LIGHTBOX -->
  <div id="lightbox" class="lightbox" role="dialog" aria-hidden="true">
    <button class="lb-close" aria-label="Tutup (Esc)">✕</button>
    <div class="lb-controls">
      <button id="prevBtn" class="lb-btn" aria-label="Sebelumnya">◀</button>
      <button id="nextBtn" class="lb-btn" aria-label="Berikutnya">▶</button>
    </div>
    <img src="" alt="" id="lightbox-img">
  </div>

  <footer style="padding:28px 0;text-align:center;color:var(--muted);background:white;border-top:1px solid #f0e0e0">
    <div class="container">
      © <strong>Gracianna Manumpahi</strong> — All Rights Reserved
      <div style="margin-top:10px;font-size:14px">
        <a href="#" style="color:var(--maroon);text-decoration:none;margin:0 10px">Kebijakan Privasi</a> | 
        <a href="#" style="color:var(--maroon);text-decoration:none;margin:0 10px">Syarat & Ketentuan</a>
      </div>
    </div>
  </footer>

  <script>
    // DOM refs
    const carousel = document.getElementById('carousel');
    const track = document.getElementById('track');
    const prev = document.getElementById('prev');
    const next = document.getElementById('next');

    // lightbox refs
    const lightbox = document.getElementById('lightbox');
    const lbImg = document.getElementById('lightbox-img');
    const lbClose = document.querySelector('.lb-close');
    const lbPrev = document.getElementById('prevBtn');
    const lbNext = document.getElementById('nextBtn');

    // raw cards present in DOM (will be re-grouped into columns)
    let rawCards = Array.from(track.querySelectorAll('.card'));
    let columns = [];
    let flattened = []; // ordered list of cards for lightbox indexing

    let currentStart = 0;        // index kolom pertama yang terlihat
    let visibleCount = 3;       // desktop default
    let gap = parseInt(getComputedStyle(track).gap) || 14;
    const CHUNK = 3; // jumlah gambar per kolom (ubah jika mau 2 atau 4)

    function buildColumns(){
      // clear track and build columns from rawCards
      track.innerHTML = '';
      columns = [];
      flattened = rawCards.slice(); // simpan urutan
      for(let i = 0; i < rawCards.length; i += CHUNK){
        const col = document.createElement('div');
        col.className = 'column';
        for(let j = i; j < i + CHUNK && j < rawCards.length; j++){
          col.appendChild(rawCards[j]);
        }
        track.appendChild(col);
        columns.push(col);
      }
      // attach click handlers to flattened cards for lightbox (use index from flattened)
      flattened.forEach((c, idx) => {
        // remove possible existing listener by cloning
        const clone = c.cloneNode(true);
        c.parentNode && c.parentNode.replaceChild(clone, c);
        flattened[idx] = clone;
      });
      // update rawCards reference (now nodes moved into columns)
      rawCards = flattened.slice();
      rawCards.forEach((c, idx) => {
        c.addEventListener('click', (e)=>{
          const anchor = c.querySelector('a.card-link');
          if(e.target.closest('a.card-link')){
            if(e.ctrlKey || e.metaKey || e.shiftKey) return; // allow opening in new tab
            e.preventDefault();
            openLightbox(idx);
          } else {
            openLightbox(idx);
          }
        });
      });
    }

    function updateVisibleCount(){
      const w = window.innerWidth;
      if(w <= 520) visibleCount = 1;
      else if(w <= 980) visibleCount = 2;
      else visibleCount = 3;
    }

    function updateLayout(){
      updateVisibleCount();
      gap = parseInt(getComputedStyle(track).gap) || 14;
      if(columns.length === 0) return;
      // calculate column width so visibleCount columns fit inside carousel
      const available = Math.max(0, carousel.clientWidth);
      const colWidth = Math.floor((available - gap * (visibleCount - 1)) / visibleCount);
      columns.forEach(c => {
        c.style.flex = `0 0 ${colWidth}px`;
      });
      const maxStart = Math.max(0, columns.length - visibleCount);
      if(currentStart > maxStart) currentStart = maxStart;
      const translate = -(colWidth + gap) * currentStart;
      track.style.transform = `translateX(${translate}px)`;
      // nav visibility
      if(columns.length <= visibleCount){
        prev.setAttribute('hidden','');
        next.setAttribute('hidden','');
      } else {
        prev.removeAttribute('hidden');
        next.removeAttribute('hidden');
      }
      prev.disabled = currentStart === 0;
      next.disabled = currentStart >= maxStart;
    }

    // nav handlers (geser 1 kolom)
    prev.addEventListener('click', ()=> {
      if(currentStart <= 0) return;
      currentStart = Math.max(0, currentStart - 1);
      updateLayout();
    });
    next.addEventListener('click', ()=> {
      const maxStart = Math.max(0, columns.length - visibleCount);
      if(currentStart >= maxStart) return;
      currentStart = Math.min(maxStart, currentStart + 1);
      updateLayout();
    });

    // lightbox fungsi (index berdasarkan flattened array)
    let lbCurrentIndex = -1;
    function openLightbox(index){
      const c = flattened[index];
      if(!c) return;
      lbImg.src = c.getAttribute('data-img') || c.querySelector('img')?.src;
      lbImg.alt = c.querySelector('img')?.alt || 'Photo';
      lightbox.classList.add('open');
      lightbox.setAttribute('aria-hidden','false');
      lbCurrentIndex = index;
    }
    function closeLightbox(){
      lightbox.classList.remove('open');
      lightbox.setAttribute('aria-hidden','true');
      lbImg.src = '';
      lbCurrentIndex = -1;
    }
    function lbShowPrev(){ if(lbCurrentIndex > 0) openLightbox(lbCurrentIndex - 1); }
    function lbShowNext(){ if(lbCurrentIndex < flattened.length - 1) openLightbox(lbCurrentIndex + 1); }

    // lightbox events
    lightbox.addEventListener('click', (e)=> {
      if(e.target === lightbox || e.target === lbClose) closeLightbox();
    });
    lbPrev.addEventListener('click', (e)=>{ e.stopPropagation(); lbShowPrev(); });
    lbNext.addEventListener('click', (e)=>{ e.stopPropagation(); lbShowNext(); });
    lbClose.addEventListener('click', (e)=>{ e.stopPropagation(); closeLightbox(); });

    document.addEventListener('keydown', (e)=>{
      if(lightbox.classList.contains('open')){
        if(e.key === 'Escape') closeLightbox();
        if(e.key === 'ArrowLeft') lbShowPrev();
        if(e.key === 'ArrowRight') lbShowNext();
      }
    });

    // responsive + resize handling (debounced)
    window.addEventListener('resize', ()=> {
      clearTimeout(window._carouselResizeTimer);
      window._carouselResizeTimer = setTimeout(updateLayout, 80);
    });

    // init: build columns then layout
    window.addEventListener('load', ()=> {
      // gather initial cards (in case some were moved/modified)
      rawCards = Array.from(document.querySelectorAll('#track .card'));
      buildColumns();
      // rebuild reference to columns and flattened
      columns = Array.from(track.querySelectorAll('.column'));
      flattened = Array.from(document.querySelectorAll('.column .card'));
      updateLayout();
    });
    // safety small timeout
    setTimeout(()=>{ 
      if(columns.length === 0){
        rawCards = Array.from(document.querySelectorAll('#track .card'));
        buildColumns();
        columns = Array.from(track.querySelectorAll('.column'));
        flattened = Array.from(document.querySelectorAll('.column .card'));
      }
      updateLayout(); 
    }, 70);
    
    // Contact form submission
    const contactForm = document.getElementById('contactForm');
    contactForm.addEventListener('submit', function(e) {
      e.preventDefault();
      
      // Get form values
      const name = document.getElementById('name').value;
      const email = document.getElementById('email').value;
      const subject = document.getElementById('subject').value;
      const message = document.getElementById('message').value;
      
      // Here you would normally send the form data to your server
      // For demo purposes, we'll just show an alert
      alert(`Terima kasih ${name}! Pesan Anda telah terkirim. Kami akan menghubungi Anda di ${email} segera.`);
      
      // Reset form
      contactForm.reset();
    });
  </script>
</body>
</html>